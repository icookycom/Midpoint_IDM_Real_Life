<apti:object xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3" xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" oid="00000000-0000-0000-0000-97631b84fde7" version="3"  xsi:type="c:ReportType">
        <_metadata id="25">
            <storage>
                <createTimestamp>2024-11-08T07:43:53.378Z</createTimestamp>
                <createChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</createChannel>
            </storage>
            <process>
                <requestTimestamp>2024-11-08T07:43:53.368Z</requestTimestamp>
            </process>
        </_metadata>
        <name>Simulation report: Results</name>
        <description>Individual simulation results, along with respective metric values.</description>
        <operationExecution id="33">
            <recordType>simple</recordType>
            <timestamp>2024-11-08T07:43:53.404Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>add</t:changeType>
                    <t:objectType>c:ReportType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000000180</token>
                </executionResult>
                <objectName>Simulation report: Results</objectName>
            </operation>
            <status>success</status>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</channel>
        </operationExecution>
        <operationExecution id="34">
            <recordType>complex</recordType>
            <timestamp>2024-11-08T07:53:16.809Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="b0d65371-2a0e-4970-93cc-6d82a82b8dfa" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="35">
            <recordType>complex</recordType>
            <timestamp>2024-11-18T08:09:27.097Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="95b6c786-0099-4bb6-9f8b-80d9bb19ed6b" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <assignment id="1">
            <_metadata id="26">
                <storage>
                    <createTimestamp>2024-11-08T07:43:53.378Z</createTimestamp>
                    <createChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</createChannel>
                </storage>
                <process>
                    <requestTimestamp>2024-11-08T07:43:53.368Z</requestTimestamp>
                </process>
                <provenance>
                    <acquisition id="27">
                        <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</channel>
                        <timestamp>2024-11-08T07:43:53.367Z</timestamp>
                    </acquisition>
                </provenance>
            </_metadata>
            <identifier>archetype</identifier>
            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
            <activation>
                <effectiveStatus>enabled</effectiveStatus>
            </activation>
        </assignment>
        <iteration>0</iteration>
        <iterationToken/>
        <archetypeRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
        <archetypeRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType"/>
        <roleMembershipRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType">
            <_metadata id="28">
                <storage>
                    <createTimestamp>2024-11-08T07:43:53.376Z</createTimestamp>
                </storage>
                <provenance>
                    <assignmentPath>
                        <sourceRef oid="00000000-0000-0000-0000-97631b84fde7" relation="org:default" type="c:ReportType"/>
                        <segment id="29">
                            <segmentOrder>1</segmentOrder>
                            <assignmentId>1</assignmentId>
                            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                    </assignmentPath>
                </provenance>
            </_metadata>
        </roleMembershipRef>
        <roleMembershipRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType">
            <_metadata id="30">
                <storage>
                    <createTimestamp>2024-11-08T07:43:53.376Z</createTimestamp>
                </storage>
                <provenance>
                    <assignmentPath>
                        <sourceRef oid="00000000-0000-0000-0000-97631b84fde7" relation="org:default" type="c:ReportType"/>
                        <segment id="31">
                            <segmentOrder>1</segmentOrder>
                            <assignmentId>1</assignmentId>
                            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                        <segment id="32">
                            <segmentOrder>2</segmentOrder>
                            <targetRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                    </assignmentPath>
                </provenance>
            </_metadata>
        </roleMembershipRef>
        <objectCollection>
            <collection/>
            <view>
                <column id="2">
                    <name>oid</name>
                    <documentation>
                    OID of the simulation result object.
                </documentation>
                    <display>
                        <label>
                            <t:orig>OID</t:orig>
                            <t:norm>oid</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.OID</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <export>
                        <expression>
                            <script>
                                <code>object.oid</code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="3">
                    <name>name</name>
                    <documentation>
                    Name of the simulation result object.
                    Usually contains information about the task that produced the report (if any),
                    identifier of the simulation result configuration used (if any),
                    and the timestamp of the simulation report creation.
                </documentation>
                    <path>name</path>
                    <previousColumn>oid</previousColumn>
                </column>
                <column id="4">
                    <name>definitionIdentifier</name>
                    <documentation>
                    Identifier of the simulation result definition used (if any).
                </documentation>
                    <path>definition/identifier</path>
                    <display>
                        <label>
                            <t:orig>Definition identifier</t:orig>
                            <t:norm>definition identifier</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.definitionIdentifier</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>name</previousColumn>
                </column>
                <column id="5">
                    <name>startTimestamp</name>
                    <path>startTimestamp</path>
                    <previousColumn>definitionIdentifier</previousColumn>
                </column>
                <column id="6">
                    <name>endTimestamp</name>
                    <path>endTimestamp</path>
                    <previousColumn>startTimestamp</previousColumn>
                </column>
                <column id="7">
                    <name>rootTaskRef</name>
                    <documentation>
                    Task under which this simulation executes or executed. (Empty for foreground simulations.)
                </documentation>
                    <path>rootTaskRef</path>
                    <display>
                        <label>
                            <t:orig>Task</t:orig>
                            <t:norm>task</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.task</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>endTimestamp</previousColumn>
                </column>
                <column id="8">
                    <name>configuration</name>
                    <path>configurationUsed/predefined</path>
                    <display>
                        <label>
                            <t:orig>Predefined configuration</t:orig>
                            <t:norm>predefined configuration</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.predefinedConfiguration</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>rootTaskRef</previousColumn>
                </column>
                <column id="9">
                    <name>builtInMetric</name>
                    <documentation>
                    Built-in metric identifier corresponding to the metric row. (If applicable.)
                </documentation>
                    <display>
                        <label>
                            <t:orig>Built-in metric</t:orig>
                            <t:norm>builtin metric</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.builtInMetric</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>configuration</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricValuesType

                                (metric as SimulationMetricValuesType)?.ref?.builtIn
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="10">
                    <name>eventMark</name>
                    <documentation>
                    Event mark corresponding to the metric row. (If applicable.)
                </documentation>
                    <display>
                        <label>
                            <t:orig>Event mark</t:orig>
                            <t:norm>event mark</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.eventMark</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>builtInMetric</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricValuesType

                                (metric as SimulationMetricValuesType)?.ref?.eventMarkRef
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="11">
                    <name>explicitMetric</name>
                    <documentation>
                    Explicit metric identifier corresponding to the metric row. (If applicable.)
                </documentation>
                    <display>
                        <label>
                            <t:orig>Explicit metric</t:orig>
                            <t:norm>explicit metric</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.explicitMetric</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>eventMark</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricValuesType

                                (metric as SimulationMetricValuesType)?.ref?.identifier
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="12">
                    <name>aggregationFunction</name>
                    <display>
                        <label>
                            <t:orig>Aggregation function</t:orig>
                            <t:norm>aggregation function</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.aggregationFunction</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>explicitMetric</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricValuesType

                                (metric as SimulationMetricValuesType)?.aggregationFunction
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="13">
                    <name>scopeType</name>
                    <documentation>
                    Type of objects (user, role, org, shadow, ...).
                </documentation>
                    <display>
                        <label>
                            <t:orig>Scope: type</t:orig>
                            <t:norm>scope type</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.scopeType</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>aggregationFunction</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.scope?.typeName
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="14">
                    <name>scopeArchetype</name>
                    <documentation>
                    Structural archetype of the objects. Applicable only to focal objects.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Scope: archetype</t:orig>
                            <t:norm>scope archetype</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.scopeArchetype</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>scopeType</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.constants.ObjectTypes
                                import com.evolveum.midpoint.schema.util.ObjectTypeUtil
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.scope?.structuralArchetypeOid?.with {
                                    ObjectTypeUtil.createObjectRef(it, ObjectTypes.ARCHETYPE)
                                }
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="15">
                    <name>scopeResource</name>
                    <documentation>
                    Resource on which the projection (shadow) resides. Applicable only to projections.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Scope: resource</t:orig>
                            <t:norm>scope resource</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.scopeResource</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>scopeArchetype</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.constants.ObjectTypes
                                import com.evolveum.midpoint.schema.util.ObjectTypeUtil
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.scope?.resourceOid?.with {
                                    ObjectTypeUtil.createObjectRef(it, ObjectTypes.RESOURCE)
                                }
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="16">
                    <name>scopeKind</name>
                    <documentation>
                    Kind of the projection (shadow). Applicable only to projections.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Scope: kind</t:orig>
                            <t:norm>scope kind</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.scopeKind</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>scopeResource</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.scope?.kind
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="17">
                    <name>scopeIntent</name>
                    <documentation>
                    Intent of the projection (shadow). Applicable only to projections.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Scope: intent</t:orig>
                            <t:norm>scope intent</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.scopeIntent</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>scopeKind</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.scope?.intent
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="18">
                    <name>value</name>
                    <documentation>
                    Aggregated value of the metric for given partition.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Value</t:orig>
                            <t:norm>value</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.value</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>scopeIntent</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.value
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="19">
                    <name>selectionSize</name>
                    <documentation>
                    Number of objects selected by given metric.
                    (The meaning of this field is metric-dependent.
                    The default meaning is "all objects that have metric value greater than zero".)
                </documentation>
                    <display>
                        <label>
                            <t:orig>Selection size</t:orig>
                            <t:norm>selection size</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.selectionSize</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>value</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.selectionSize
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="20">
                    <name>selectionTotalValue</name>
                    <documentation>
                    Sum of metric values for all objects selected by the metric.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Selection total value</t:orig>
                            <t:norm>selection total value</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.selectionTotalValue</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>selectionSize</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.selectionTotalValue
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="21">
                    <name>domainSize</name>
                    <documentation>
                    Number of objects on which given metric was evaluated.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Domain size</t:orig>
                            <t:norm>domain size</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.domainSize</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>selectionTotalValue</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.domainSize
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="22">
                    <name>domainTotalValue</name>
                    <documentation>
                    Sum of metric values for all objects.
                </documentation>
                    <display>
                        <label>
                            <t:orig>Domain total value</t:orig>
                            <t:norm>domain total value</t:norm>
                            <t:translation>
                                <t:key>SimulationReports.column.domainTotalValue</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>domainSize</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricPartitionType

                                (partition as SimulationMetricPartitionType)?.domainTotalValue
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <type>c:SimulationResultType</type>
            </view>
            <subreport id="23">
                <name>metric</name>
                <type>SimulationMetricValuesType</type>
                <expression>
                    <script>
                        <code>object.metric</code>
                    </script>
                </expression>
                <order>10</order>
                <resultHandling>
                    <multipleValues>splitParentRow</multipleValues>
                </resultHandling>
            </subreport>
            <subreport id="24">
                <name>partition</name>
                <type>SimulationMetricPartitionType</type>
                <expression>
                    <script>
                        <code>
                        import com.evolveum.midpoint.xml.ns._public.common.common_3.SimulationMetricValuesType

                        (metric as SimulationMetricValuesType)?.partition
                    </code>
                    </script>
                </expression>
                <order>20</order>
                <resultHandling>
                    <multipleValues>splitParentRow</multipleValues>
                </resultHandling>
            </subreport>
        </objectCollection>
    </apti:object>
