<apti:object xmlns:apti="http://midpoint.evolveum.com/xml/ns/public/common/api-types-3" xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" oid="00000000-0000-0000-0000-000000000150" version="3"  xsi:type="c:ReportType">
        <_metadata id="14">
            <storage>
                <createTimestamp>2024-11-08T07:43:52.989Z</createTimestamp>
                <createChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</createChannel>
            </storage>
            <process>
                <requestTimestamp>2024-11-08T07:43:52.973Z</requestTimestamp>
            </process>
        </_metadata>
        <name>Certification cases report</name>
        <description>Cases within given certification campaign(s).</description>
        <operationExecution id="22">
            <recordType>simple</recordType>
            <timestamp>2024-11-08T07:43:53.026Z</timestamp>
            <operation>
                <objectDelta>
                    <t:changeType>add</t:changeType>
                    <t:objectType>c:ReportType</t:objectType>
                </objectDelta>
                <executionResult>
                    <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
                    <status>success</status>
                    <importance>normal</importance>
                    <token>1000000000000000150</token>
                </executionResult>
                <objectName>Certification cases report</objectName>
            </operation>
            <status>success</status>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</channel>
        </operationExecution>
        <operationExecution id="23">
            <recordType>complex</recordType>
            <timestamp>2024-11-08T07:53:14.956Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="b0d65371-2a0e-4970-93cc-6d82a82b8dfa" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <operationExecution id="24">
            <recordType>complex</recordType>
            <timestamp>2024-11-18T08:09:25.650Z</timestamp>
            <status>success</status>
            <initiatorRef oid="00000000-0000-0000-0000-000000000002" relation="org:default" type="c:UserType"/>
            <taskRef oid="95b6c786-0099-4bb6-9f8b-80d9bb19ed6b" relation="org:default" type="c:TaskType"/>
            <activityPath/>
            <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#user</channel>
        </operationExecution>
        <assignment id="1">
            <_metadata id="15">
                <storage>
                    <createTimestamp>2024-11-08T07:43:52.989Z</createTimestamp>
                    <createChannel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</createChannel>
                </storage>
                <process>
                    <requestTimestamp>2024-11-08T07:43:52.973Z</requestTimestamp>
                </process>
                <provenance>
                    <acquisition id="16">
                        <channel>http://midpoint.evolveum.com/xml/ns/public/common/channels-3#init</channel>
                        <timestamp>2024-11-08T07:43:52.972Z</timestamp>
                    </acquisition>
                </provenance>
            </_metadata>
            <identifier>archetype</identifier>
            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
            <activation>
                <effectiveStatus>enabled</effectiveStatus>
            </activation>
        </assignment>
        <iteration>0</iteration>
        <iterationToken/>
        <archetypeRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
        <archetypeRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType"/>
        <roleMembershipRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType">
            <_metadata id="19">
                <storage>
                    <createTimestamp>2024-11-08T07:43:52.986Z</createTimestamp>
                </storage>
                <provenance>
                    <assignmentPath>
                        <sourceRef oid="00000000-0000-0000-0000-000000000150" relation="org:default" type="c:ReportType"/>
                        <segment id="20">
                            <segmentOrder>1</segmentOrder>
                            <assignmentId>1</assignmentId>
                            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                        <segment id="21">
                            <segmentOrder>2</segmentOrder>
                            <targetRef oid="00000000-0000-0000-0000-000000000172" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                    </assignmentPath>
                </provenance>
            </_metadata>
        </roleMembershipRef>
        <roleMembershipRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType">
            <_metadata id="17">
                <storage>
                    <createTimestamp>2024-11-08T07:43:52.985Z</createTimestamp>
                </storage>
                <provenance>
                    <assignmentPath>
                        <sourceRef oid="00000000-0000-0000-0000-000000000150" relation="org:default" type="c:ReportType"/>
                        <segment id="18">
                            <segmentOrder>1</segmentOrder>
                            <assignmentId>1</assignmentId>
                            <targetRef oid="00000000-0000-0000-0000-000000000171" relation="org:default" type="c:ArchetypeType"/>
                            <matchingOrder>true</matchingOrder>
                        </segment>
                    </assignmentPath>
                </provenance>
            </_metadata>
        </roleMembershipRef>
        <objectCollection>
            <collection>
                <filter>
                    <q:inOid>
                        <expression>
                            <queryInterpretationOfNoValue>filterAll</queryInterpretationOfNoValue>
                            <script>
                                <objectVariableMode>prismReference</objectVariableMode>
                                <code>campaignRef?.oid</code>
                            </script>
                        </expression>
                        <q:considerOwner>true</q:considerOwner>
                    </q:inOid>
                </filter>
            </collection>
            <view>
                <column id="2">
                    <name>object</name>
                    <path>objectRef</path>
                    <display>
                        <label>
                            <t:orig>Object</t:orig>
                            <t:norm>object</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.objectColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <export>
                        <expression>
                            <script>
                                <objectVariableMode>prismReference</objectVariableMode>
                                <code>
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                // Provides the type plus object name
                                ReportUtils.prettyPrintForReport(input)
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="3">
                    <name>target</name>
                    <path>targetRef</path>
                    <display>
                        <label>
                            <t:orig>Target</t:orig>
                            <t:norm>target</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.targetColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>object</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <objectVariableMode>prismReference</objectVariableMode>
                                <code>
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                // Provides the type plus object name
                                ReportUtils.prettyPrintForReport(input)
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="4">
                    <name>campaignName</name>
                    <display>
                        <label>
                            <t:orig>Campaign</t:orig>
                            <t:norm>campaign</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.campaignNameColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>target</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.util.CertCampaignTypeUtil
                                import com.evolveum.midpoint.xml.ns._public.common.common_3.AccessCertificationCaseType

                                CertCampaignTypeUtil.getCampaign(object as AccessCertificationCaseType)?.name?.orig
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="5">
                    <name>reviewers</name>
                    <display>
                        <label>
                            <t:orig>Reviewers</t:orig>
                            <t:norm>reviewers</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.reviewersColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>campaignName</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.util.CertCampaignTypeUtil

                                return CertCampaignTypeUtil.getCurrentlyAssignedReviewers(object.asPrismContainerValue())
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="6">
                    <name>lastReviewedOn</name>
                    <display>
                        <label>
                            <t:orig>Last reviewed on</t:orig>
                            <t:norm>last reviewed on</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.lastReviewedOnColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>reviewers</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.util.CertCampaignTypeUtil
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                CertCampaignTypeUtil.getLastReviewedOn(object.asPrismContainerValue())
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="7">
                    <name>reviewedBy</name>
                    <display>
                        <label>
                            <t:orig>Reviewed by</t:orig>
                            <t:norm>reviewed by</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.reviewedByColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>lastReviewedOn</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.util.CertCampaignTypeUtil
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                CertCampaignTypeUtil.getReviewedBy(object.asPrismContainerValue())
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="8">
                    <name>iteration</name>
                    <path>iteration</path>
                    <display>
                        <label>
                            <t:orig>Iteration</t:orig>
                            <t:norm>iteration</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.iterationColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>reviewedBy</previousColumn>
                </column>
                <column id="9">
                    <name>inStageNumber</name>
                    <path>stageNumber</path>
                    <display>
                        <label>
                            <t:orig>In stage</t:orig>
                            <t:norm>in stage</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.inStageNumberColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>iteration</previousColumn>
                </column>
                <column id="10">
                    <name>outcome</name>
                    <path>outcome</path>
                    <display>
                        <label>
                            <t:orig>Outcome</t:orig>
                            <t:norm>outcome</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.outcomeColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>inStageNumber</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                ReportUtils.prettyPrintCertOutcomeForReport(input as String, false)
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="11">
                    <name>comments</name>
                    <display>
                        <label>
                            <t:orig>Comments</t:orig>
                            <t:norm>comments</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.commentsColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>outcome</previousColumn>
                    <export>
                        <expression>
                            <script>
                                <code>
                                import com.evolveum.midpoint.schema.util.CertCampaignTypeUtil
                                import com.evolveum.midpoint.report.impl.ReportUtils

                                CertCampaignTypeUtil.getComments(object.asPrismContainerValue())
                            </code>
                            </script>
                        </expression>
                    </export>
                </column>
                <column id="12">
                    <name>remediedTimestamp</name>
                    <path>remediedTimestamp</path>
                    <display>
                        <label>
                            <t:orig>Remedied on</t:orig>
                            <t:norm>remedied on</t:norm>
                            <t:translation>
                                <t:key>reportCertificationCases.remediedTimestampColumn.label</t:key>
                            </t:translation>
                        </label>
                    </display>
                    <previousColumn>comments</previousColumn>
                </column>
                <paging>
                    <q:orderBy>objectRef/@/name</q:orderBy>
                </paging>
                <type>AccessCertificationCaseType</type>
            </view>
            <parameter id="13">
                <name>campaignRef</name>
                <type>c:ObjectReferenceType</type>
                <targetType>c:AccessCertificationCampaignType</targetType>
                <display>
                    <label>
                        <t:orig>campaignName</t:orig>
                        <t:norm>campaignname</t:norm>
                        <t:translation>
                            <t:key>runReportPopupContent.param.name.campaignName</t:key>
                        </t:translation>
                    </label>
                </display>
            </parameter>
        </objectCollection>
    </apti:object>
